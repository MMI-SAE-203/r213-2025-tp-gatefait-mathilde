---
import Header from "../components/Header.astro";
import Base from "../layouts/Base.astro";
import Footer from "../components/Footer.astro";
import Card from "../components/Card.astro";
import { getOffres } from "../backend.mjs";

const offres = await getOffres();

console.log(offres);

/*
const offres = [
  {
    adresse: "2821 Lake Sevilla, Palm Harbor, TX",
    favori: true,
    id: "64l3n8nar836i5j",
    nbChambres: 4,
    nbSdb: 2,
    nomMaison: "Beverly Springfield",
    prix: 2700,
    surface: 45,
    imgUrl: "image1.png",
  },
  {
    adresse: "2699 Green Valley, Highland Lake",
    favori: true,
    id: "lo831zeg10hpm9y",
    nbChambres: 4,
    nbSdb: 2,
    nomMaison: "Palm Harbor",
    prix: 2095,
    surface: 42,
    imgUrl: "image2.png",
  },
  {
    adresse: "909 Woodland St, Michigan, IN",
    favori: false,
    id: "s1zuhj19x8eb242",
    nbChambres: 4,
    nbSdb: 3,
    nomMaison: "Faulkner Ave",
    prix: 4550,
    surface: 80,
    imgUrl: "image3.png",
  },
];
*/
---

<Base titre="Offres">
  <h1 class="m-10 text-4xl uppercase font-bold text-pink-700">Offres</h1>
  <p class="m-10">
    Vous trouverez ici les futurs offres que propose notre site
  </p>
  <div x-data="{ viewMode: 'grid' }" class="m-10">
    <div x-data="{ showFavorites: false }">
      <div class="ml-5">
        <button
          @click="viewMode = 'grid'"
          :class="viewMode === 'grid' ? 'bg-blue-700' : 'bg-gray-300'"
          class="text-white font-bold py-2 px-4 rounded mr-2"
          >Afficher en grille</button
        >

        <button
          @click="viewMode = 'list'"
          :class="viewMode === 'list' ? 'bg-blue-700' : 'bg-gray-300'"
          class="text-white font-bold py-2 px-4 rounded"
          >Afficher en liste</button
        >
        <button
          @click="showFavorites = !showFavorites"
          class="bg-blue-700 text-white font-bold py-2 px-4 rounded"
        >
          <span x-show="!showFavorites">Afficher les favoris</span>
          <span x-show="showFavorites">Afficher tout</span>
        </button>
        <div x-show="!showFavorites">
          <div
            :class="viewMode === 'grid' ? 'grid grid-cols-3 gap-4': 'flex flex-col gap-4'"
          >
            {offres.map((offre) => <Card {...offre} />)}
          </div>
        </div>

        <div x-show="showFavorites">
          {offres.map((offre) => offre.favoris && <Card {...offre} />)}
        </div>
      </div>
    </div>
  </div></Base
>
